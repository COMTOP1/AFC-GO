{{define "title"}}Users{{end}}
{{define "content"}}
    <main class="main" style="text-align: center; justify-content: center; align-content: center; align-items: center;">
        <div style="background-color: white; margin: 10px 0 10px 0; padding: 5px 0 5px 0; text-align: center">
            <h2 style="color: #1F1F1F" class="welcomeHeader">
                Users<br><br>
                {{if or (eq .User.Role "Secretary") (or (eq .User.Role "Chairperson") (eq .User.Role "Webmaster"))}}
                    <a class="button is-info" onclick="addUserModal()">Add user</a>
                {{end}}</h2>
        </div>

        <table style="align-items: center; display: inline-flex; border-radius: 5px;
        box-shadow: 0 .5em 1em -.125em rgba(10, 10, 10, .1), 0 0 0 1px rgba(10, 10, 10, .02);" class="table is-striped">
            <tr>
                {{if eq .User.Role "Webmaster"}}
                    <th>ID</th>{{end}}
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Team</th>
                <th>Role</th>
                <th>Image</th>
                {{if or (eq .User.Role "Secretary") (or (eq .User.Role "Chairperson") (eq .User.Role "Webmaster"))}}
                    <th>Edit</th>
                    <th>Delete</th>
                    <th>Reset password</th>
                {{end}}
            </tr>
            {{range .Users}}
                <tr{{if eq $.User.ID .ID}} class="is-selected"{{end}}>
                    {{if eq $.User.Role "Webmaster"}}
                        <th>{{.ID}}
                        </th>{{end}}
                    <th>{{.Name}}
                    </th>
                    <th>{{.Email}}
                    </th>
                    <th>{{.Phone}}
                    </th>
                    {{$team := ""}}
                    {{if ne .TeamID 0}}
                        {{$team = getTeamName .TeamID}}
                    {{else}}
                        {{$team = "Not Related to team"}}
                    {{end}}
                    <th>{{$team}}
                    </th>
                    <th>{{.Role}}
                    </th>
                    <th><img data-src="/download?s=u&id={{.ID}}" alt="/public/AFC.png"
                             onerror="this.onerror=null;this.src='/public/AFC.png';"
                             src="/public/AFC.png"
                             style="border: 5px; max-height: 200px; max-width: 200px;" class="lazy"></th>
                    {{if or (and (eq .Role "Webmaster") (eq $.User.Role "Webmaster")) (and (or (or (eq $.User.Role "Secretary") (eq $.User.Role "Chairperson")) (eq $.User.Role "Webmaster")) (ne .Role "Webmaster"))}}
                        {{/*                    {{if or (and (or (eq $.User.Role "Secretary") (eq $.User.Role "Chairperson")) (eq .Role "Webmaster")) (eq $.User.Role "Webmaster")}}*/}}
                        <th>
                            <a class="button is-warning" onclick="editUserModal()">Edit</a>
                        </th>
                        <th>
                            <a class="button is-danger" onclick="deleteUserModal()">Delete</a>
                        </th>
                        <th>
                            <a class="button is-warning" onclick="resetPasswordModal()">Reset password</a>
                        </th>
                    {{end}}
                </tr>
            {{end}}
        </table>
    </main>
    {{if or (eq .User.Role "Secretary") (or (eq .User.Role "Chairperson") (eq .User.Role "Webmaster"))}}
        {{template "modal" .}}
    {{end}}
{{end}}

{{define "modal"}}

{{end}}